<div style="display: flex; flex-direction: column; align-items: center;">
    <%= form_with(model: user, local: true) do |form| %>

        <%# Error message %>
        <% if user.errors.any? %>
            <div style="color: red">
                <h3><%= pluralize(user.errors.count, "error") %> Prohibited this user from being save:</h3>
                <ul>
                    <% user.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                    <% end %>
                </ul>
            </div>
        <% end %>

        <%# profile pic %>
        <div>
            <%= form.label :profile_picture %>
            <%= form.file_field :profile_picture%>
        </div>

        <div>
            <%= form.label :first_name, style: "display: block" %>
            <%= form.text_field :first_name %>
        </div>

        <div>
            <%= form.label :last_name, style: "display: block" %>
            <%= form.text_field :last_name %>
        </div>

        <div>
            <%= form.label :email, style: "display: block" %>
            <%= form.text_field :email %>
        </div>

        <div>
            <%= form.label :phone_number, style: "display: block" %>
            <%= form.telephone_field :phone_number%>
        </div>

         <div>
            <%= form.label :password, style: "display: block margin-right: 8px;" %>
            <div>
                <%= form.password_field :password, id: "password_digit_field" %>
                <button type="button" id="toggle_password_btn" style="padding: 4px 4px;">Show</button>
            </div>
        </div>

        <div>
            <%= form.submit %>
        </div>

    <% end %>
</div>

<script>
  document.addEventListener("turbo:load", function() {
    const toggleBtn = document.getElementById("toggle_password_btn");
    const passwordField = document.getElementById("password_digit_field");

    if (!toggleBtn || !passwordField) return;

    // Remove any existing listener before adding a new one (to avoid duplicates)
    toggleBtn.replaceWith(toggleBtn.cloneNode(true));
    const newToggleBtn = document.getElementById("toggle_password_btn");

    newToggleBtn.addEventListener("click", function() {
      if (passwordField.type === "password") {
        passwordField.type = "text";
        newToggleBtn.textContent = "Hide";
      } else {
        passwordField.type = "password";
        newToggleBtn.textContent = "Show";
      }
    });
  });
</script>