<div class="modal-overlay">
  <div class="modal-box">
    <button class="close-btn" data-action="click->modal#close">âœ–</button>

    <h2>Add Expense</h2>

    <%= form_with(model: expense, url: expenses_path, local: true) do |form| %>
      <% if expense.errors.any? %>
        <div style="color: red; margin-bottom: 10px;">
          <h3><%= pluralize(expense.errors.count, "error") %> prevented saving:</h3>
          <ul>
            <% expense.errors.each do |err| %>
              <li><%= err.full_message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-row">
        <%= form.label :title %>
        <%= form.text_field :title, required: true %>
      </div>

      <div class="form-row">
        <%= form.label :amount %>
        <%= form.number_field :amount, step: "0.01", required: true %>
      </div>

      <div class="form-row">
        <%= form.label :category_id, "Category" %>
        <%= form.collection_select :category_id, Category.all, :id, :name, prompt: "Select Category" %>
      </div>

      <div class="form-actions">
        <button type="button" data-action="click->modal#close" class="cancel-btn">Cancel</button>
        <%= form.submit "Save", class: "save-btn" %>
      </div>
    <% end %>
  </div>
</div>

<style>
.modal-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center; z-index:2000; }
.modal-box { background:white; padding:20px; width:400px; border-radius:8px; position:relative; }
.close-btn { position:absolute; top:10px; right:14px; font-size:20px; border:none; background:none; cursor:pointer; }
.form-row { margin-bottom:10px; }
.form-row label { display:block; font-weight:bold; margin-bottom:4px; }
.form-row input, .form-row select { width:100%; padding:6px; border-radius:4px; border:1px solid #ccc; }
.form-actions { display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
.cancel-btn { background:#ccc; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; }
.cancel-btn:hover { background:#999; }
.save-btn { background:#1d917a; color:white; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; }
.save-btn:hover { background:#0ca694; }
</style>
